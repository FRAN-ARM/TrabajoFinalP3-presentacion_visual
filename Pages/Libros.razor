@page "/Libros"
@inject HttpClient Http
<link rel="stylesheet" href="css/style_buscador_a.css">
<div class="btn-toolbar mb-3" role="toolbar" aria-label="Toolbar with button groups">
  <div class="btn-group me-2" role="group" aria-label="First group">
    <button type="button" class="btn btn-primary" @onclick="@(() =>Nombre(0))">Texto</button>
    <button type="button" class="btn btn-primary" @onclick="@(() =>Nombre(1))">Paginas</button>
    <button type="button" class="btn btn-primary" @onclick="@(() =>Nombre(2))">Edicion</button>
    <button type="button" class="btn btn-primary" @onclick="@(() =>Nombre(3))">Fecha</button>
  </div>
</div>
<div class="input-group mb-3 mt-3 input-group-lg ">
    <span @onclick="Buscar" class="input-group-text" id="basic-addon1">
        <img  src="/images/icon_Search.svg" class="image-fluid" alt="">
  </span>
    <input type="text" class="form-control" placeholder="Buscar..." aria-label="Username" aria-describedby="basic-addon1" @bind="texto">
</div>
<div class="container text-center">
  <div class="row">
  <div class="col col-10 align-self-end" style="width: 1150px;">
    <!--Hola-->
    @if(Visi){
        texto = "";
        <TLibros></TLibros>
        Visi = false;
    }
    @if(galeria == true){
        <GaleriaDeLib></GaleriaDeLib>
    }
    
  </div>
  <div class=" col col align-self-start">
      <div class="row">
          <button style="color: white; font-size: 30px; background-color: rgb(212, 170, 17); height:80px; width:80px; border-style: none; border-radius: 2px;">
            +
          </button>
      </div>
      <div class="row">
          <button @onclick="VerComoGaleria" style="color: white; font-size: 30px; background-color: darkcyan; height:80px; width:80px; border-style: none; border-radius: 2px;">
            Galeria
          </button>
      </div>
    </div>
  </div>
    

</div>

@code{
    public string texto = "";
    public bool Visi = true;
    private bool galeria = false;
    private LiBro[]? _Lb;

    string[] Nombres = {"Libro", "Autor", "Publicacion", "Categoria", "Editorial"};

    void VerComoGaleria(){
        if (galeria == true)
        {
            galeria = false;
            Visi = true;
        }
        else
        {
            galeria = true;
            Visi = false;
        }

    }

    void Nombre(int N)
    {
        Visi = true;
        Filtros.Titulo = Nombres[N];
    }

    void CambiarVisi()
    {
        if (Visi == true)
        {
            Visi = false;
        }
        else
        {
            if (Visi == false)
            {
                Visi = true;
            }
        }
    }

    void Buscar()
    {
        Console.WriteLine("Buscando: " + texto);
        Filtros.Busqueda = texto;
        texto = "";
        CambiarVisi();
    }

  protected override async Task OnInitializedAsync()
  {
    _Lb = await Http.GetFromJsonAsync<LiBro[]>("https://localhost:7268/api/Libro");
  }

  public class LiBro
  {
    public string id { get; set; }
    public string? Nombre { get; set; }
    public int Paginas { get; set; }
    public string? Descripcion { get; set; }
    public int Edicion { get; set; }
    public DateTime Publicacion { get; set; }
    public string? Autor { get; set; }
    public string? Categoria { get; set; }
    public string? Editorial { get; set; }
  }

}
