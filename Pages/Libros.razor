@page "/Libros"
@inject HttpClient Http
<link rel="stylesheet" href="css/style_buscador_a.css">
<div class="btn-toolbar mb-3" role="toolbar" aria-label="Toolbar with button groups">
  <div class="btn-group me-2" role="group" aria-label="First group">
    <button type="button" class="btn btn-primary" @onclick="@(() =>Nombre(0))">Texto</button>
    <button type="button" class="btn btn-primary" @onclick="@(() =>Nombre(1))">Paginas</button>
    <button type="button" class="btn btn-primary" @onclick="@(() =>Nombre(2))">Edicion</button>
    <button type="button" class="btn btn-primary" @onclick="@(() =>Nombre(3))">Fecha</button>
  </div>
</div>
<div class="input-group mb-3 mt-3 input-group-lg ">
    <span @onclick="Buscar" class="input-group-text" id="basic-addon1">
        <img  src="/images/icon_Search.svg" class="image-fluid" alt="">
  </span>
    <input type="text" class="form-control" placeholder="Buscar..." aria-label="Username" aria-describedby="basic-addon1" @bind="texto">
</div>
<div class="container text-center">
  <div class="row">
  <div class="col col-10 align-self-end" style="width: 1150px;">
    <!--Hola-->
    @if(Visi){
        texto = "";
        <TLibros></TLibros>
        Visi = false;
    }
    @if(galeria == true){
        <GaleriaDeLib></GaleriaDeLib>
    }
    
  </div>
  <div class=" col col align-self-start">
      <div class="row">
          <button style="color: white; font-size: 30px; background-color: rgb(212, 170, 17); height:80px; width:80px; border-style: none; border-radius: 2px;">
            +
          </button>
      </div>
      <div class="row">
          <button @onclick="VerComoGaleria" style="color: white; font-size: 30px; background-color: darkcyan; height:80px; width:80px; border-style: none; border-radius: 2px;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-book" viewBox="0 0 16 16">
                        <path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783" />
                    </svg>
          </button>
      </div>
    </div>
  </div>
    

</div>

@code{
    public string texto = "";
    public bool Visi = true;
    private bool galeria = false;
    private LiBro[]? _Lb;

    string[] Nombres = {"Libro", "Autor", "Publicacion", "Categoria", "Editorial"};

    void VerComoGaleria(){
        if (galeria == true)
        {
            galeria = false;
            Visi = true;
        }
        else
        {
            galeria = true;
            Visi = false;
        }

    }

    void Nombre(int N)
    {
        Visi = true;
        Filtros.Titulo = Nombres[N];
    }

    void CambiarVisi()
    {
        if (Visi == true)
        {
            Visi = false;
        }
        else
        {
            if (Visi == false)
            {
                Visi = true;
            }
        }
    }

    void Buscar()
    {
        Console.WriteLine("Buscando: " + texto);
        Filtros.Busqueda = texto;
        texto = "";
        CambiarVisi();
    }

  protected override async Task OnInitializedAsync()
  {
    _Lb = await Http.GetFromJsonAsync<LiBro[]>("https://localhost:7268/api/Libro");
  }

  public class LiBro
  {
    public string id { get; set; }
    public string? Nombre { get; set; }
    public int Paginas { get; set; }
    public string? Descripcion { get; set; }
    public int Edicion { get; set; }
    public DateTime Publicacion { get; set; }
    public string? Autor { get; set; }
    public string? Categoria { get; set; }
    public string? Editorial { get; set; }
  }

}
