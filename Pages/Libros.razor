@page "/Libros"
@inject HttpClient Http

<link rel="stylesheet" href="css/style_buscador_a.css">

<h3>Buscar Libro</h3>

<div class=" ml-4 mt-1 mb-3">
  <button type="button" class="btn btn-info btn-sm" @onclick="@(() => CambiarTitulo(1))">Libro</button>
  <button type="button" class="btn btn-info btn-sm" @onclick="@(() => CambiarTitulo(2))">Autor</button>
  <button type="button" class="btn btn-info btn-sm" @onclick="@(() => CambiarTitulo(3))">Edición</button>
  <button type="button" class="btn btn-info btn-sm" @onclick="@(() => CambiarTitulo(4))">Fecha de Publicación</button>
  <button type="button" class="btn btn-info btn-sm" @onclick="@(() => CambiarTitulo(5))">Nombre Categoría</button>
  <button type="button" class="btn btn-info btn-sm" @onclick="@(() => CambiarTitulo(6))">Nombre Editorial</button>
</div>
<div class="container m-0 p-0">
  <div class="form d-flex justify-content-start">
    <button type="button" class="btn btn-primary d-flex justify-content-center align-items-center" style="width: 4rem;border-top-right-radius: 0; border-bottom-right-radius: 0;">
      <img src="/images/icon_Search.svg" class="image-fluid" alt="">
    </button>
    <input type="text" class="form-search form-input" placeholder="Buscar..." style="border-top-left-radius: 0; border-bottom-left-radius: 0;">
  </div>
</div>

@if (FsLb == null)
{
  <p><em>Loading...</em></p>
}else{
  <div class="container m-0 p-3 mt-5" style="background-color: #825550; border-radius: 0.5rem;">
    <h3 class="text-center text-light">
      <strong>@TituloL</strong></h3>
    <div style="border-radius: 0.3rem; height: 500px; overflow-y: scroll;" class="container bg-light m-0 p-0">
      <table class="table">
        <thead class="thead" style="background-color: transparent;">
          <tr>
            <th>Libro</th>
            <th>Pag.</th>
            <th>Descripción</th>
            <th>Edición</th>
            <th>Fecha Publicación</th>
            <th>Autor</th>
            <th>Categoría</th>
            <th>Editorial</th>
            </tr>
        </thead>
        <tbody>
         @foreach (var forecast in FsLb)
          {
            <tr>
              <td>@forecast.Nombre</td>
              <td>@forecast.Paginas</td>
              <td>@forecast.Descripcion</td>
              <td>@forecast.Edicion</td>
              <td>@forecast.Publicacion</td>
              <td>@forecast.Categoria</td>
              <td>@forecast.Autor</td>
              <td>@forecast.Editorial</td>
              <td>
                <button type="button" class="btn btn-info btn-sm">Editar</button>
              </td>
              <td>
                <button type="button" class="btn btn-danger btn-sm">Eliminar</button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
}

@code {
  private WeatherForecast[]? FsLb;

  private string TituloL = "Nombre libro";

  protected override async Task OnInitializedAsync()
  {
    FsLb = await Http.GetFromJsonAsync<WeatherForecast[]>("sample-data/Datalibros.json");
  }

  public class WeatherForecast
  {
    public string? Nombre { get; set; }
    public string? Paginas { get; set; }
    public string? Descripcion { get; set; }
    public string? Edicion { get; set; }
    public string? Publicacion { get; set; }
    public string? Autor { get; set; }
    public string? Categoria { get; set; }
    public string? Editorial { get; set; }
  }

  private void CambiarTitulo(int NumeroTitulo)
  {
    switch (NumeroTitulo)
    {
      case 1:
        TituloL = "Nombre del libro";
        break;
      case 2:
        TituloL = "Nombre Autor";
        break;
      case 3:
        TituloL = "Edición";
        break;
      case 4:
        TituloL = "Fecha de Publicación";
        break;
      case 5:
        TituloL = "Nombre Categoría";
        break;
      case 6:
        TituloL = "Nombre Editorial";
        break;
    }
  }
}
